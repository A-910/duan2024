services:
  app1:
    build:
      context: ./fp
      dockerfile: Dockerfile  # Mặc định nếu tên là Dockerfile
    ports:
      - "5051:5050"
    networks:
      - mynetwork
    volumes:
      - ./fp/serviceAccountKey.json:/app/serviceAccountKey.json
    restart: always

  app2:
    build:
      context: ./fp-ip
      dockerfile: Dockerfile  # Mặc định nếu tên là Dockerfile
    ports:
      - "5052:5050"
    networks:
      - mynetwork
    volumes:
      - ./fp-ip/serviceAccountKey.json:/app/serviceAccountKey.json
    restart: always

  app3:
    build:
      context: ./image-detector
      dockerfile: Dockerfile  # Mặc định nếu tên là Dockerfile
    ports:
      - "5053:5050"
    networks:
      - mynetwork
    volumes:
      - ./image-detector/serviceAccountKey.json:/app/serviceAccountKey.json
      - ./image-detector/model:/app/model
    restart: always

networks:
  mynetwork:
    driver: bridge
